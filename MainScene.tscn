[gd_scene load_steps=14 format=2]

[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Main.gd" type="Script" id=2]
[ext_resource path="res://Spawner.gd" type="Script" id=3]
[ext_resource path="res://Wave.gd" type="Script" id=4]
[ext_resource path="res://Player/PlayerCamera.gd" type="Script" id=5]
[ext_resource path="res://Enemy/Enemy.tscn" type="PackedScene" id=6]
[ext_resource path="res://gui/FpsLabel.tscn" type="PackedScene" id=7]
[ext_resource path="res://HUD.gd" type="Script" id=8]
[ext_resource path="res://HUD/hud_theme.tres" type="Theme" id=9]
[ext_resource path="res://GUI/GUI.tscn" type="PackedScene" id=10]
[ext_resource path="res://audio/re2.mp3" type="AudioStream" id=11]

[sub_resource type="NavigationMesh" id=7]
vertices = PoolVector3Array( -8.75, 1.2, -11.25, -6.25, 1.2, -11.5, -6.25, 1.2, -18.5, -9.5, 1.2, -10.25, -8.75, 1.2, -11.25, -6.25, 1.2, -18.5, -18.5, 1.2, -18.5, -18.5, 1.2, -8.75, -18.5, 1.2, -8.75, -9.5, 1.2, -8.75, -9.5, 1.2, -10.25, -6.25, 1.2, -11.5, -1.5, 1.2, -11.5, -1.5, 1.2, -18.5, -6.25, 1.2, -18.5, -1.5, 1.2, -18.5, -1.5, 1.2, -11.5, 1, 1.2, -11.25, -1.5, 1.2, -18.5, 1, 1.2, -11.25, 1.75, 1.2, -10.25, 18.5, 1.2, -9, 18.5, 1.2, -18.5, 1.75, 1.2, -10.25, 1.75, 1.2, -9.25, 18.5, 1.2, -9, 9.5, 1.2, 3.25, 9.75, 1.2, 5, 18.5, 1.2, 5, 1.5, 1.2, -7.25, 0, 1.2, -6.25, 0.25, 1.2, 2.5, 8.5, 1.2, 2.5, 8.5, 1.2, 2.5, 9.5, 1.2, 3.25, 18.5, 1.2, 5, 18.5, 1.2, -9, 1.75, 1.2, -9.25, 1.5, 1.2, -7.25, -9.5, 1.2, -7.5, -9.5, 1.2, -8.75, -18.5, 1.2, -8.75, -1.25, 1.2, 3.25, 0.25, 1.2, 2.5, 0, 1.2, -6.25, -8.25, 1.2, -6.25, -8.25, 1.2, -6.25, -9.5, 1.2, -7.5, -18.5, 1.2, -8.75, -18.5, 1.2, 5.25, -1.5, 1.2, 5.25, -1.25, 1.2, 3.25, 18.5, 1.2, 5, 9.75, 1.2, 5, 9.75, 1.2, 6.25, 18.5, 1.2, 5, 9.75, 1.2, 6.25, 8.75, 1.2, 7.5, 7, 1.2, 18.5, 18.5, 1.2, 18.5, 8.75, 1.2, 7.5, 6.75, 1.2, 7.75, 7, 1.2, 18.5, 1, 1.2, 18.5, 1.25, 1.2, 7.75, -0.75, 1.2, 7.5, 1, 1.2, 18.5, -0.75, 1.2, 7.5, -1.5, 1.2, 6.5, -18.5, 1.2, 5.25, -18.5, 1.2, 18.5, -1.5, 1.2, 6.5, -1.5, 1.2, 5.25, -18.5, 1.2, 5.25, 1, 1.2, 18.5, 7, 1.2, 18.5, 6.75, 1.2, 7.75, 1.25, 1.2, 7.75 )
polygons = [ PoolIntArray( 2, 1, 0 ), PoolIntArray( 4, 3, 5 ), PoolIntArray( 5, 3, 6 ), PoolIntArray( 6, 3, 7 ), PoolIntArray( 10, 9, 8 ), PoolIntArray( 14, 13, 11 ), PoolIntArray( 11, 13, 12 ), PoolIntArray( 17, 16, 15 ), PoolIntArray( 19, 18, 20 ), PoolIntArray( 20, 18, 22 ), PoolIntArray( 20, 22, 21 ), PoolIntArray( 25, 24, 23 ), PoolIntArray( 28, 27, 26 ), PoolIntArray( 30, 29, 31 ), PoolIntArray( 31, 29, 32 ), PoolIntArray( 34, 33, 35 ), PoolIntArray( 35, 33, 36 ), PoolIntArray( 36, 33, 38 ), PoolIntArray( 36, 38, 37 ), PoolIntArray( 41, 40, 39 ), PoolIntArray( 43, 42, 44 ), PoolIntArray( 44, 42, 45 ), PoolIntArray( 47, 46, 48 ), PoolIntArray( 48, 46, 49 ), PoolIntArray( 49, 46, 51 ), PoolIntArray( 49, 51, 50 ), PoolIntArray( 54, 53, 52 ), PoolIntArray( 56, 55, 57 ), PoolIntArray( 57, 55, 59 ), PoolIntArray( 57, 59, 58 ), PoolIntArray( 62, 61, 60 ), PoolIntArray( 65, 64, 63 ), PoolIntArray( 67, 66, 68 ), PoolIntArray( 68, 66, 70 ), PoolIntArray( 68, 70, 69 ), PoolIntArray( 73, 72, 71 ), PoolIntArray( 77, 76, 74 ), PoolIntArray( 74, 76, 75 ) ]
cell_height = 0.8
agent_radius = 1.5

[sub_resource type="SpatialMaterial" id=6]
albedo_color = Color( 0.25098, 0.2, 0.2, 1 )

[node name="MainScene" type="Spatial"]
script = ExtResource( 2 )

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 11 )
autoplay = true

[node name="Player" parent="." instance=ExtResource( 1 )]

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -2.18557e-08, -0.866025, 0.5, -3.78552e-08, 0.5, 0.866025, -1, 1.77636e-15, -4.37114e-08, 8, 10, 0 )
shadow_enabled = true

[node name="Camera" type="Camera" parent="."]
transform = Transform( -1, 8.44439e-08, -2.26267e-08, 0, 0.258819, 0.965926, 8.74228e-08, 0.965926, -0.258819, 0, 15, -6 )
script = ExtResource( 5 )

[node name="Spawner" type="Spatial" parent="."]
script = ExtResource( 3 )
Enemy = ExtResource( 6 )

[node name="Timer" type="Timer" parent="Spawner"]

[node name="Waves" type="Node" parent="Spawner"]

[node name="Wave" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 2

[node name="Wave2" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 5

[node name="Wave3" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 7

[node name="Wave4" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )

[node name="Wave5" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 13

[node name="Wave6" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 16

[node name="Wave7" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 20

[node name="Wave8" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 25

[node name="Wave9" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 30

[node name="Wave10" type="Node" parent="Spawner/Waves"]
script = ExtResource( 4 )
nb_enemies = 40

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="."]
navmesh = SubResource( 7 )

[node name="Ground" type="CSGBox" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )
use_collision = true
collision_layer = 9
width = 40.0
depth = 40.0

[node name="CSGBox" type="CSGBox" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 1, 5 )
use_collision = true
width = 8.0
height = 4.0
material = SubResource( 6 )

[node name="CSGBox2" type="CSGBox" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1, -9 )
use_collision = true
width = 8.0
height = 4.0
material = SubResource( 6 )

[node name="HUD" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 20.0
margin_top = 20.0
margin_right = -20.0
margin_bottom = -20.0
theme = ExtResource( 9 )
script = ExtResource( 8 )

[node name="GridContainer" type="GridContainer" parent="HUD"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -70.0
margin_right = 182.0
columns = 2

[node name="AmmoLabel" type="Label" parent="HUD/GridContainer"]
margin_right = 95.0
margin_bottom = 33.0
text = "AMMO :"

[node name="AmmoValue" type="Label" parent="HUD/GridContainer"]
margin_left = 99.0
margin_right = 154.0
margin_bottom = 33.0
text = "0/10"

[node name="MobLabel" type="Label" parent="HUD/GridContainer"]
margin_top = 37.0
margin_right = 95.0
margin_bottom = 70.0
text = "MOBS :"

[node name="MobValue" type="Label" parent="HUD/GridContainer"]
margin_left = 99.0
margin_top = 37.0
margin_right = 154.0
margin_bottom = 70.0
text = "0/10"

[node name="PlayerLifeBar" parent="HUD" instance=ExtResource( 10 )]
anchor_left = 0.28
anchor_right = 0.28

[node name="GridContainer2" type="GridContainer" parent="HUD"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -157.0
margin_top = -33.0
columns = 2

[node name="ScoreLabel" type="Label" parent="HUD/GridContainer2"]
margin_right = 98.0
margin_bottom = 33.0
text = "SCORE :"

[node name="ScoreValue" type="Label" parent="HUD/GridContainer2"]
margin_left = 102.0
margin_right = 148.0
margin_bottom = 33.0
text = "320"

[node name="FpsLabel" parent="." instance=ExtResource( 7 )]
margin_right = 66.0
margin_bottom = 34.0
custom_colors/font_color = Color( 0.337255, 0.729412, 0.223529, 1 )

[connection signal="ammo_update" from="Player/GunControler" to="HUD" method="_on_GunControler_ammo_update"]
[connection signal="health_changed" from="Player/Stats" to="HUD/PlayerLifeBar" method="_on_Player_health_changed"]
[connection signal="you_died_signal" from="Player/Stats" to="." method="_on_Player_died_signal"]
[connection signal="enemy_killed" from="Spawner" to="HUD" method="_on_Spawner_enemy_killed"]
[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_Timer_timeout"]

[editable path="Player"]
